(this["webpackJsonp@godwoken-polyman/client"]=this["webpackJsonp@godwoken-polyman/client"]||[]).push([[0],{296:function(e,t,n){},317:function(e,t,n){},32:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(125),o=n.n(a),r=n(42);const s=(e=0)=>new Promise((t=>setTimeout(t,e)));t.b={convertTimestamp:e=>"string"===typeof e?new Date(parseInt(e)).toLocaleTimeString():new Date(e).toLocaleTimeString(),hex2dec:e=>BigInt(e).toString(10),dec2hex:e=>BigInt(e).toString(16),shannon2CKB:e=>o.a.divide(o.a.BigInt(e),o.a.BigInt(1e8)).toString(10),CKB2shannon:e=>BigInt(e).toString(10)+"00000000",isObjectInArray:(e,t)=>{for(let n=0;n<t.length;n++)if(JSON.stringify(t[n])===JSON.stringify(e))return!0;return!1},arrayBufferToBuffer:t=>{for(var n=e.alloc(t.byteLength),a=new Uint8Array(t),o=0;o<n.length;++o)n[o]=a[o];return n},get_env_mode:()=>"development"===r.mode?"development":"production",asyncSleep:s,readDataFromFile:e=>new Promise(((t,n)=>{const a=new FileReader;a.onload=e=>{const n=e.target.result;t({status:"ok",data:n})},a.onerror=e=>{t({status:"failed",error:e})},a.onabort=()=>{t({status:"failed",error:"user abort."})},a.readAsBinaryString(e)}))}}).call(this,n(8).Buffer)},322:function(e,t,n){},324:function(e,t,n){},42:function(e){e.exports=JSON.parse('{"development_server_url":"http://localhost:6101","web3_server_url":{"devnet":"http://localhost:8024","testnet":"https://godwoken-testnet-web3-rpc.ckbapp.dev","mainnet":"https://mainnet.godwoken.io/rpc"},"production_server_url":"https://your.domain","mode":"development"}')},530:function(e,t){},559:function(e,t){},561:function(e,t){},626:function(e,t){},628:function(e,t){},660:function(e,t){},665:function(e,t){},667:function(e,t){},674:function(e,t){},687:function(e,t){},710:function(e,t){},784:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(20),s=n.n(r),i=(n(296),n(278)),c=n(23),l=n(16),d=n.n(l),u=n(42),p=n(32);d.a.defaults.withCredentials=!0;var h=class{constructor(){this.base_url=void 0,this.base_url="development"===p.b.get_env_mode()?u.development_server_url:u.production_server_url}getUrl(){return this.base_url}async getServerConfig(){return(await d.a.get(`${this.base_url}/get_server_configs`,{params:{}})).data}async getGodwokenScriptDeployResultFile(){return(await d.a.get(`${this.base_url}/get_godwoken_script_deploy_result_file`,{params:{}})).data}async getGodwokenConfigFile(){return(await d.a.get(`${this.base_url}/get_godwoken_config`,{params:{}})).data}async getRollupTypeHash(){return(await d.a.get(`${this.base_url}/get_rollup_type_hash`,{params:{}})).data}async getEthAccountLockConfig(){return(await d.a.get(`${this.base_url}/get_eth_account_lock`,{params:{}})).data}async getBalance(e){return(await d.a.get(`${this.base_url}/get_layer2_balance`,{params:{eth_address:e}})).data}async getSudtBalance(e){return(await d.a.get(`${this.base_url}/get_layer2_sudt_balance`,{params:{eth_address:e}})).data}async issueToken(){return(await d.a.get(`${this.base_url}/issue_token`,{params:{}})).data}async getSudtToken(){return(await d.a.get(`${this.base_url}/get_sudt_token`,{})).data}async getSudtTokenTotalAmount(){return(await d.a.get(`${this.base_url}/get_sudt_token_total_amount`,{})).data}async deposit(e){return(await d.a.get(`${this.base_url}/deposit`,{params:{eth_address:e}})).data}async deposit_sudt(e){return(await d.a.get(`${this.base_url}/deposit_sudt`,{params:{eth_address:e}})).data}async transfer(e,t,n,a){return(await d.a.post(`${this.base_url}/transfer`,{data:{to_id:e,amount:t,fee:n,eth_address:a}})).data}async deployContract(e,t){return(await d.a.post(`${this.base_url}/deploy_contract`,{data:{contract_code:e,eth_address:t}})).data}async deployErc20ProxyContract(e){return(await d.a.post(`${this.base_url}/deploy_erc20_proxy_contract`,{data:{eth_address:e}})).data}async deploySudtContract(){return(await d.a.post(`${this.base_url}/deploy_sudt_contract`,{data:{}})).data}async sendL2Transaction(e,t,n,a){return(await d.a.post(`${this.base_url}/send_l2_tx`,{data:{raw_l2tx:e,signature:t,type:n,l2_script_args:a}})).data}async getTransactionReceipt(e){return(await d.a.get(`${this.base_url}/get_tx_receipt`,{params:{tx_hash:e}})).data}async getContractAddrByAccountId(e){return(await d.a.get(`${this.base_url}/get_contract_addr_by_account_id`,{params:{account_id:e}})).data}async getChainId(){return(await d.a.get(`${this.base_url}/get_chain_id`,{params:{}})).data}},g=n(63);n(316),n(317);var b={page:{maxWidth:"700px",margin:"atuo",textAlign:"center"},content:{width:"100%",marginTop:"20px",textAlign:"left"},main_color:{color:"#3CC68A"},background_color:{color:"#282c34"},wide_card:{padding:"10px",textAlign:"left"},wide_card_title:{color:"#3CC68A",textAlign:"center"},blockquote:{background:"#f9f9f9",borderLeft:"10px solid #3CC68A",margin:"1.5em 10px",padding:"1em 2em",color:"black"},clear_path:{clear:"both"},li:{listStyleType:"none",marginLeft:"0"},ul:{listStyleType:"none",paddingLeft:"0"},status_bar:{width:"100%",padding:"5px",margin:"10px 0px",clear:"both",justifyContent:"center"},status_bar_title:{float:"left",fontSize:"16px",fontWeight:"bolder"},status_bar_btn:{float:"right",textAlign:"center",marginRight:"20px"},modal:{maxWidth:"700px",maxHeight:"80%",overflowY:"scroll",padding:"20px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},paper:{backgroundColor:"gray",border:"2px solid #000",boxShadow:"10px",padding:"10px",width:"100%",outline:"none"},hidden_btn:{width:"100%",border:"0",backgroundColor:"rgb(0,0,0, 0)",height:"0",cursor:"auto"},single_line_code:{background:"white",color:"gray",padding:"2px",borderRadius:"5px"},explain_text:{fontSize:"14px",color:"gray",margin:"20px"},input_wrap:{padding:"2px 5px",marginBottom:"10px",display:"block",background:"white"},input:{width:"100%",outline:"none",fontSize:"14px",border:"0",overflowX:"scroll",verticalAlign:"text-bottom"},describe_img_wrapper:{maxWidth:"100px",margin:"40px auto"},describe_img:{width:"100%",height:"100%",background:"#282c34"},describe_img_footnote:{textAlign:"center",fontSize:"11px"}},j=n(2);const x={...b,panel:{},toast:{padding:"10px",fontSize:"14px"}};function f(){return Object(j.jsx)("div",{children:Object(j.jsx)(g.a,{style:x.panel,toastStyle:x.toast})})}const m=(e,t)=>{switch(t){case"error":g.b.error(e);break;case"success":g.b.success(e);break;case"warning":g.b.warn(e);break;case"info":g.b.info(e);break;case"dark":g.b.dark(e);break;default:g.b.error(e)}};var y=n(832),_=n(279);const w=function(e,t,n,o){const[r,s]=o||[];if(r===s&&"number"===typeof r)throw new Error("Only define this when the icon is not a square");const i=function({sx:e,...a},i){const c=o?{width:r,height:s,...e}:e;return Object(j.jsx)(_.a,{viewBox:n,...a,ref:i,children:t,sx:c})};return i.displayName=`Icon (${e})`,Object(a.memo)(Object(a.forwardRef)(i))}("MetaMask",Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("path",{d:"M0 12C0 5.373 5.373 0 12 0h24c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12H12C5.373 48 0 42.627 0 36V12z",fill:"#fff"}),Object(j.jsx)("path",{d:"M38.709 10l-11.8 8.75 2.195-5.157L38.709 10z",fill:"#E17726",stroke:"#E17726",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M11.493 10l11.694 8.832-2.09-5.239L11.494 10zM34.464 30.288l-3.14 4.807 6.722 1.855 1.926-6.557-5.508-.105zM10.247 30.393l1.914 6.557 6.71-1.855-3.127-4.807-5.497.105z",fill:"#E27625",stroke:"#E27625",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M18.509 22.168l-1.867 2.824 6.652.303-.222-7.175-4.563 4.048zM31.696 22.168l-4.633-4.13-.152 7.257 6.652-.303-1.867-2.824zM18.872 35.095l4.027-1.948-3.466-2.707-.56 4.655zM27.31 33.147l4.014 1.948-.549-4.655-3.466 2.707z",fill:"#E27625",stroke:"#E27625",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M31.322 35.095l-4.015-1.948.327 2.613-.035 1.108 3.723-1.773zM18.87 35.095l3.735 1.773-.023-1.108.315-2.613-4.026 1.948z",fill:"#D5BFB2",stroke:"#D5BFB2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M22.674 28.713l-3.338-.98 2.358-1.085.98 2.065zM27.528 28.713l.98-2.065 2.37 1.085-3.35.98z",fill:"#233447",stroke:"#233447",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M18.87 35.095l.583-4.806-3.71.104 3.127 4.702zM30.75 30.288l.571 4.807 3.14-4.701-3.712-.105zM33.566 24.992l-6.652.303.618 3.418.98-2.065 2.37 1.085 2.684-2.741zM19.336 27.733l2.357-1.085.98 2.065.619-3.418-6.652-.303 2.696 2.741z",fill:"#CC6228",stroke:"#CC6228",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M16.64 24.992l2.79 5.448-.094-2.707-2.696-2.741zM30.874 27.733l-.105 2.707 2.79-5.448-2.685 2.741zM23.29 25.295l-.618 3.418.781 4.037.176-5.32-.339-2.135zM26.912 25.295l-.327 2.123.163 5.332.782-4.037-.619-3.418z",fill:"#E27525",stroke:"#E27525",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M27.528 28.713l-.782 4.037.56.397 3.466-2.707.105-2.707-3.35.98zM19.336 27.733l.094 2.707 3.466 2.707.56-.397-.782-4.037-3.338-.98z",fill:"#F5841F",stroke:"#F5841F",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M27.6 36.868l.035-1.108-.303-.257h-4.458l-.292.257.023 1.108-3.734-1.773 1.307 1.073L22.827 38h4.54l2.66-1.832 1.296-1.073-3.723 1.773z",fill:"#C0AC9D",stroke:"#C0AC9D",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M27.308 33.147l-.56-.397h-3.29l-.561.397-.315 2.613.292-.257h4.458l.303.257-.327-2.613z",fill:"#161616",stroke:"#161616",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M39.211 19.322l.992-4.83L38.71 10l-11.402 8.458 4.388 3.71 6.197 1.809 1.365-1.599-.595-.431.945-.864-.723-.56.945-.723-.619-.478zM10 14.492l1.004 4.83-.642.478.957.723-.724.56.945.864-.595.431 1.366 1.599 6.197-1.809 4.388-3.71L11.494 10 10 14.492z",fill:"#763E1A",stroke:"#763E1A",strokeLinecap:"round",strokeLinejoin:"round"}),Object(j.jsx)("path",{d:"M37.896 23.977L31.7 22.168l1.867 2.824-2.789 5.448 3.688-.047h5.508l-2.077-6.416zM18.51 22.168l-6.198 1.809-2.065 6.416h5.496l3.688.047-2.789-5.448 1.867-2.824zM26.913 25.295l.397-6.837 1.797-4.865h-8.006l1.798 4.865.396 6.837.152 2.147.012 5.308h3.29l.013-5.308.151-2.147z",fill:"#F5841F",stroke:"#F5841F",strokeLinecap:"round",strokeLinejoin:"round"})]}),"0 0 48 48");var O=n(269),v=n(105);n(322);const k={...b,loader:{border:"4px solid rgba(60, 198, 138, 0.2)",borderLeft:"4px solid",animation:"load 1s infinite linear",borderRadius:"50%",width:"25px",height:"25px",margin:"0 auto"},btn:{padding:"0.5rem 1rem",fontSize:"12px",color:"white",borderRadius:"6px",border:"1px solid "+b.main_color.color,outline:"none",backgroundColor:"rgb(255,255,255, 0)",cursor:"pointer"},btndiv:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},btn_hover:{padding:"0.5rem 1rem",fontSize:"12px",color:"white",borderRadius:"6px",border:"1px solid "+b.main_color.color,outline:"none",backgroundColor:b.main_color.color,cursor:"pointer"}},C=()=>Object(j.jsx)("div",{style:k.loader});function S(e){const[t,n]=Object(a.useState)(0),[o,r]=Object(a.useState)(0),s=Object(a.useRef)(null),i=void 0===e.isLoading,[c,l]=Object(a.useState)(!1),[d,u]=Object(a.useState)(!i&&e.isLoading),[p,h]=Object(a.useState)(!1);Object(a.useEffect)((()=>{if(void 0!==e.isLoading&&u(e.isLoading),d&&l(!0),!d&&c){const e=setTimeout((()=>{l(!1)}),400);return()=>{clearTimeout(e)}}}),[e.isLoading,d,c]);const g=Object(v.b)({opacity:c?1:0}),b=Object(v.b)({opacity:c?0:1}),x=()=>{h(!p)},f={...{...p?k.btn_hover:k.btn,...t&&o?{width:`${t}px`,height:`${o}px`}:{}},..."undefined"===e.custom_style?{}:e.custom_style};return Object(j.jsx)("button",{style:f,onClick:async()=>{i&&u(!0),await e.onClick(),i&&u(!1)},onMouseEnter:x,onMouseLeave:x,ref:s,children:c?Object(j.jsx)(v.a.div,{style:g,children:Object(j.jsx)(C,{})}):Object(j.jsx)(v.a.div,{style:b,children:e.text})})}var A=n(161),T=n.n(A),z=n(272),L=n.n(z),$=n(271),B=n.n($);d.a.defaults.withCredentials=!1;class E{constructor(){this.url=void 0,this.url=u.web3_server_url.devnet}async getChainInfo(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"poly_getChainInfo",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getRollupTypeHash(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"poly_getRollupTypeHash",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getEthAccountLockHash(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"poly_getEthAccountLockHash",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getPolyjuiceContractTypeHash(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"poly_getContractValidatorTypeHash",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getCreatorId(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"poly_getCreatorId",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getChainId(){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"eth_chainId",params:[]},{headers:{"Content-Type":"application/json"}})).data}async getBalance(e){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"eth_getBalance",params:[e,"pending"]},{headers:{"Content-Type":"application/json"}})).data.result}async getTransactionReceipt(e){return(await d.a.post(this.url,{jsonrpc:"2.0",id:+new Date,method:"eth_getTransactionReceipt",params:[e]},{headers:{"Content-Type":"application/json"}})).data.result}async waitForTransactionReceipt(e,t=300,n=3){for(let a=0;a<t;a+=n){const t=await this.getTransactionReceipt(e);if(console.log(`keep fetching tx_receipt with ${e}, waited for ${a} seconds`),await p.b.asyncSleep(1e3*n),null!==t)return}throw new Error(`cannot fetch tx_receipt with tx ${e} in ${t} seconds`)}}const R={wallet_container:{maxWidth:"300px",maxHeigth:"20px",margin:"20px auto",display:"flex",padding:"5px",alignItems:"center",borderRadius:"30px",justifyContent:"center",backgroundColor:"rgb(60, 198, 138)"},status:{fontSize:"18px",color:"gray",margin:"20px"},status_item:{boder:"1px solid gray",padding:"5px",marginRight:"10px"},balance:{color:"whitesmoke",fontSize:"20px"},dark_green:{color:"#065a06"}};function M(e){const{onUpdateWalletAddress:t,updateChainId:n}=e;var{updateBalanceTrigger:o}=e;const[r,s]=Object(a.useState)(),[i,c]=Object(a.useState)(),[l,d]=Object(a.useState)(),[u,g]=Object(a.useState)(),[b,x]=Object(a.useState)(!0),[f,y]=Object(a.useState)("0"),_=(B.a,R.dark_green.color,L.a,T.a,R.dark_green.color,T.a,async()=>{const e=await window.ethereum.request({method:"eth_chainId"});return await s(e),n&&n(e),e}),v=async()=>O.a.isMetaMaskInstalled()?(await d("installed"),!0):(await d("not-installed"),!1),k=async()=>{try{const e=await _();console.log(`current chain id: ${e}`);new h;const t=new E,n=await t.getChainId();console.log(n);const a=n.result;return e!==a?(console.error(`current chain id not equals ${e} !== polyjuice chain id ${a}`),await g(!1),!1):(await g(!0),!0)}catch(e){return m(JSON.stringify(e,null,2)),!1}},C=()=>{window.ethereum.on("chainChanged",(function(e){console.log("chain_id changed!"),s(e),window.location.reload()}))},A=()=>{window.ethereum.on("accountsChanged",(function(e){e.length>0?c(e[0]):(c(void 0),d("diconnect"),m("please reconnect to metamask!"))}))},z=()=>{window.ethereum.on("connect",(function(){console.log("connect!!!"),x(!0)})),window.ethereum.on("disconnect",(function(){x(!1)}))},$=async()=>{try{await window.ethereum.request({method:"eth_requestAccounts"}),d("connected"),c(window.ethereum.selectedAddress)}catch(e){m(JSON.stringify(e,null,2)),d("connect-failed"),console.error(e)}},M=async()=>{if(!i)return;const e=new E;try{const t=await e.getBalance(i);if(!t)return console.log("balance is undefinded.");const n=BigInt(t).toString();if(f===p.b.shannon2CKB(n)){console.log("balance not changed, wait for 20 secs to re-fetch.."),await Object(p.a)(2e4);const t=await e.getBalance(i);if(!t)return console.log("balance is undefinded.");const n=BigInt(t).toString();return await y(p.b.shannon2CKB(n)),void console.log("try refresh balance..",p.b.shannon2CKB(n),"")}await y(p.b.shannon2CKB(n)),console.log("try refresh balance..",p.b.shannon2CKB(n),"")}catch(t){console.log("get bablance error"),console.log(t),m(JSON.stringify(t))}};Object(a.useEffect)((()=>{(async()=>{if(!v())throw m("please install MetaMask!"),new Error("please install MetaMask!");window.ethereum.isConnected()&&x(!0),await _(),await k(),C(),A(),z(),$()})(),M()}),[]),Object(a.useEffect)((()=>{M()}),[o]),Object(a.useEffect)((()=>{t&&t(i),M()}),[i]);return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{style:R.wallet_container,children:[Object(j.jsx)(w,{}),Object(j.jsx)(S,{custom_style:{fontSize:"25px",fontWeight:"bolder",border:"none"},text:(e=>{const t=e.length;return 42!==t?e:e.slice(0,8)+"..."+e.slice(t-6)})(i||"Connect Wallet"),onClick:i?function(){}:$})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{style:R.balance,children:[" ",Object(j.jsxs)("span",{children:[f," CKB ( ",(e=>{const t=parseFloat(e)/parseFloat("10000000000");return t>0?t.toFixed(10-e.length+1):t.toFixed(2)})(f),"  pETH )"]})]})})]})}n(324);var I=n(823),H=n(842),F=n(824),N=n(788),J=n(841),D=n(825);function W(e){const{children:t,value:n,index:a,...o}=e;return Object(j.jsx)("div",{role:"tabpanel",hidden:n!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,style:{minHeight:"400px"},...o,children:n===a&&Object(j.jsx)(J.a,{p:3,children:Object(j.jsx)(N.a,{children:t})})})}function P(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const K=Object(I.a)((e=>({root:{flexGrow:1,backgroundColor:e.palette.grey[100],color:e.palette.common.black}})));function G(e){const t=K(),[n,a]=o.a.useState(0),{names:r,tabs:s}=e,i=r.map(((e,t)=>Object(j.jsx)(F.a,{label:e,...P(t)}))),c=s.map(((e,t)=>Object(j.jsx)(W,{value:n,index:t,children:e})));return Object(j.jsxs)("div",{className:t.root,children:[Object(j.jsx)(D.a,{square:!0,children:Object(j.jsx)(H.a,{value:n,onChange:(e,t)=>{a(t)},"aria-label":"simple tabs example",centered:!0,children:i})}),c]})}var U=n(826),q=n(827),V=n(828),X=n(829),Y=n(830),Q=n(831),Z=n(834),ee=n(833),te=n(843);const ne=Object(I.a)({root:{textAlign:"left"}});function ae(){const e=ne(),[t,n]=Object(a.useState)(),[o,r]=Object(a.useState)(),[s,i]=Object(a.useState)(),[c,l]=Object(a.useState)(),[d,u]=Object(a.useState)(),[p,g]=Object(a.useState)();Object(a.useEffect)((()=>{(async()=>{const e=new E;try{const t=await e.getChainInfo();if(console.log(t),t.error)return m("failed to get chain info, ",t.error);const a=t.result;await i(a.chainId),await l(a.polyjuiceCreatorId),await n(a.rollupScriptHash),await r({hash_type:"type",code_hash:a.ethAccountLockTypeHash}),await u(a.polyjuiceContractTypeHash)}catch(t){console.log("get chain info error"),console.log(t),m(t.message)}})(),(async()=>{const e=new h;try{const t=await e.getServerConfig();if("ok"!==t.status)return m(`failed to get server config. ${JSON.stringify(t.error)}`);console.log(t.data),g(t.data)}catch(t){console.log("get server config error"),console.log(t),m(t.message)}})()}),[]);const b=`\n  ## Web3 Api\n  EndPoint:  ${(new E).url}\n  - ChainInfo: JsonRpc 2.0, poly_getChainInfo\n  - RollupTypeHash: JsonRpc 2.0, poly_getRollupTypeHash \n  - RollupConfigHash: JsonRpc 2.0, poly_getRollupConfigHash\n  - EthAccountLockHash: JsonRpc 2.0, poly_getEthAccountLockHash  \n  - PolyjuiceContractTypeHash: JsonRpc 2.0, poly_getContractValidatorTypeHash\n\n  ## Kicker Api\n  EndPoint:  ${(new h).getUrl()}\n  - RollupTypeHash: Http Get, ${(new h).getUrl()}/get_rollup_type_hash \n  - EthAccountLock: Http Get, ${(new h).getUrl()}/get_eth_account_lock\n  - DepositWithEthAddress: Http Get, ${(new h).getUrl()}/deposit?eth_address=<your eth address>\n  \n  ## Godwoken JsonRpc\n  EndPoint: http://localhost:8119\n\n  ## CKB JsonRpc\n  EndPoint: http://localhost:8114\n  `;function x(e,t){return{name:e,value:t}}const f=[x("Chain ID",s),x("Polyjuice Creator_id(CKB)",c),x("Rollup Script Hash",t),x("ETH Account Lock Hash",null===o||void 0===o?void 0:o.code_hash),x("Polyjuice Contract Type Hash",d)],_=Object(j.jsx)(U.a,{component:D.a,children:Object(j.jsxs)(q.a,{"aria-label":"simple table",children:[Object(j.jsx)(V.a,{children:Object(j.jsx)(X.a,{})}),Object(j.jsx)(Y.a,{children:f.map((e=>Object(j.jsxs)(X.a,{children:[Object(j.jsx)(Q.a,{component:"th",scope:"row",children:e.name}),Object(j.jsx)(Q.a,{children:e.value})]},e.name)))})]})});function w(e,t,n){return{name:e,addr:t,pk:n}}const O=[w("Type","CKB Address","Private Key"),w("the only and lonely CKB miner",null===p||void 0===p?void 0:p.addresses.miner_ckb_devnet_addr,null===p||void 0===p?void 0:p.addresses.miner_private_key),w("the only and lonely Godwoken miner",null===p||void 0===p?void 0:p.addresses.miner_ckb_devnet_addr,null===p||void 0===p?void 0:p.addresses.miner_private_key),w("the meta-user to create everything",null===p||void 0===p?void 0:p.addresses.user_ckb_devnet_addr,null===p||void 0===p?void 0:p.addresses.user_private_key)],v=Object(j.jsx)(U.a,{component:D.a,children:Object(j.jsxs)(q.a,{"aria-label":"simple table",children:[Object(j.jsx)(V.a,{children:Object(j.jsx)(X.a,{})}),Object(j.jsx)(Y.a,{children:O.map((e=>Object(j.jsxs)(X.a,{children:[Object(j.jsx)(Q.a,{component:"th",scope:"row",children:e.name}),Object(j.jsx)(Q.a,{children:e.addr}),Object(j.jsx)(Q.a,{children:e.pk})]},e.name)))})]})}),k=Object(j.jsx)(y.a,{container:!0,spacing:3,children:Object(j.jsxs)(y.a,{item:!0,xs:12,children:[Object(j.jsx)(N.a,{children:"Some Apis"}),Object(j.jsx)(te.a,{language:"md",style:ee.a,children:b})]})});return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(Z.a,{target:"_blank",href:"/godwoken_info",children:"Full Rollup Configs"})}),Object(j.jsx)("br",{}),_,Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(N.a,{children:"System Pre-defined Wallets"}),Object(j.jsx)("br",{}),v,Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),k]})}var oe=n(844),re=n(845),se=n(835),ie=n(846),ce=n(840),le=n(848);const de=Object(I.a)((e=>Object(oe.a)({root:{fontSize:"18px",textAlign:"center",minHeight:"400px"},formControl:{margin:e.spacing(1),minWidth:400,fontSize:"18px"},selectEmpty:{marginTop:e.spacing(2)},formControlButton:{paddingTop:"20px",minWidth:150},hint:{width:"100%",textAlign:"center",fontSize:"10px",color:"gray"}}))),ue={freshBtn:{fontSize:"18px",color:"black",height:"40px"}};function pe(e){const t=de(),{addressVec:n,updateBalanceTrigger:r}=e,[s,i]=o.a.useState(""),[c,l]=Object(a.useState)(""),d=Object(a.useRef)(),u=n.map(((e,t)=>Object(j.jsx)(re.a,{value:e,children:e}))),p=async e=>{const t=new h;try{l("try submitting a deposit transaction, might takes couple mitutes...");const n=await t.deposit(e);console.log("deposit result =>",n),"ok"===n.status?(m(`deposit success! your account id: ${n.data.account_id}.`,"success"),r&&r()):m(JSON.stringify(n.error)),l("")}catch(n){m(JSON.stringify(n)),l(JSON.stringify(n.message))}};return Object(j.jsx)("div",{className:t.root,children:Object(j.jsxs)(D.a,{children:[Object(j.jsx)(y.a,{container:!0,spacing:4,children:Object(j.jsx)(y.a,{item:!0,xs:12,children:Object(j.jsx)(N.a,{variant:"h4",gutterBottom:!0,children:"Create && Desposit"})})}),Object(j.jsxs)(y.a,{container:!0,spacing:3,children:[Object(j.jsxs)(y.a,{item:!0,xs:12,children:[Object(j.jsxs)(se.a,{className:t.formControl,children:[Object(j.jsx)(ie.a,{id:"demo-simple-select-label",children:"selectAddress"}),Object(j.jsx)(ce.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s,onChange:e=>{i(e.target.value)},children:u})]}),Object(j.jsx)(se.a,{className:t.formControlButton,children:Object(j.jsx)(S,{custom_style:ue.freshBtn,text:"Deposit 400 CKB",onClick:async()=>{if(!s)return m("please select a eth address to deposit.");await p(s)}})})]}),Object(j.jsx)(y.a,{item:!0,xs:12,children:Object(j.jsx)(N.a,{children:"Or Input Other Eth Address: "})}),Object(j.jsxs)(y.a,{item:!0,xs:12,children:[Object(j.jsx)(se.a,{className:t.formControl,children:Object(j.jsx)(le.a,{id:"standard-basic",label:"ethAddress",inputRef:d})}),Object(j.jsx)(se.a,{className:t.formControlButton,children:Object(j.jsx)(S,{custom_style:ue.freshBtn,text:"Deposit 400 CKB",onClick:async()=>{var e;const t=null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.value;if(!t||42!=t.length)return m("invalid eth address.");await p(t)}})})]}),Object(j.jsx)("div",{className:t.hint,children:Object(j.jsx)(N.a,{children:c})})]})]})})}var he=n(839),ge=n(31),be=n(93),je=n.n(be);const xe=n(138),fe={...b,container:{},method_item:{textAlign:"left",maxWidth:"700px",margin:"0 auto"},method_box:{fontSize:"14px",border:"1px solid gray",padding:"20px",textAlign:"left",maxWidth:"700px",margin:"0 auto",display:"block"},method_name:{textAlign:"left",fontSize:"16px",padding:"10px 0",color:b.main_color.color},return_value:{border:"1px solid gray",padding:"5px"},param_input:{width:"100%",padding:"5px"},submit_btn:{padding:"5px"},select_abi_file:{fontSize:"14px"},contract_addr_input_container:{maxWidth:"600px",margin:"0 auto"},contract_addr_input:{width:"100%",padding:"5px",fontSize:"16px"},setting_container:{maxWidth:"700px",border:"1px solid gray",margin:"10px auto",padding:"10px 0"},log_container:{maxWidth:"700px",border:"1px solid gray",margin:"10px auto",padding:"10px 0",textAlign:"left"},log_container_title:{fontSize:"16px",color:b.main_color.color,textAlign:"center"},log_main_area:{fontSize:"14px",textAlign:"left",padding:"10px",margin:"5px"}},me=[];function ye(e){const{rollup_type_hash:t,eth_account_lock_code_hash:n,eth_account_lock_hash_type:o}=e.godwoken_config,[r,s]=(new E,Object(a.useState)(me)),[i,c]=Object(a.useState)(),[l,d]=Object(a.useState)([]);Object(a.useEffect)((()=>{}),[]);const h=()=>{const e=u.web3_server_url.devnet;return new je.a(je.a.givenProvider||e)};return Object(j.jsxs)("div",{style:fe.container,children:[Object(j.jsxs)("div",{style:fe.setting_container,children:[Object(j.jsxs)("p",{style:fe.select_abi_file,children:[Object(j.jsx)("label",{children:"Upload Contract ABI\uff1a"}),Object(j.jsx)("input",{type:"file",placeholder:"abi file",onChange:async e=>{const t=await(async e=>{const t=e.target.files[0],n=await p.b.readDataFromFile(t);if(console.log(n),"ok"!==n.status)throw m("can not read contract abi from file."),new Error("can not read contract abi from file.");const a=JSON.parse(n.data);if(Array.isArray(a))return a;if("object"===typeof a&&a.abi)return a.abi;throw m("not a valid abi file!"),new Error("not a valid abi file!")})(e);await s(t)}})]}),Object(j.jsx)("p",{style:fe.contract_addr_input_container,children:Object(j.jsx)("input",{type:"text",placeholder:"enter contract address..",style:fe.contract_addr_input,onChange:e=>{c(e.target.value)}})})]}),Object(j.jsxs)("div",{style:fe.log_container,children:[Object(j.jsx)("div",{style:fe.log_container_title,children:" Call Logs "}),Object(j.jsx)("div",{style:fe.log_main_area,children:l.map(((e,t)=>Object(j.jsxs)("li",{children:[t,": ",e]},t)))})]}),(e=>e.filter((e=>"function"===e.type)).map(((e,t)=>{var n,a=[],o=[],r="0";const s=e=>{a[parseInt(e.target.name)]=e.target.value},c=async(e,t)=>{var n;const a=xe.encodeFunctionCall(e,t),r={gasPrice:"0x0000",gas:"0x9184e72a000",to:i||"0x"+"0".repeat(40),from:window.ethereum.selectedAddress,data:a};console.log(r);const s=h(),c=await s.eth.call(r);console.log(`web3.eth.call result: ${JSON.stringify(c,null,2)}`);const l=xe.decodeParameters(null===(n=e.outputs)||void 0===n?void 0:n.map((e=>e.type)),c);console.log(l);for(let i=0;i<l.__length__;i++)o[i]=l[i+""];console.log(o),m(JSON.stringify(o,null,2),"success"),await d((t=>[...t,`call "${e.name}", receive return value: ${JSON.stringify(o)}`]))},l=async(e,t)=>{const n=xe.encodeFunctionCall(e,t);console.log(r);const a=e.payable?"0x"+BigInt(r).toString(16):"0x00",o={gasPrice:"0x0000",gas:"0x9184e72a000",to:i||"0x"+"0".repeat(40),from:window.ethereum.selectedAddress,value:a,data:n};console.log(o);const s=h(),c=await s.eth.sendTransaction(o);console.log(`txReceipt: ${JSON.stringify(c,null,2)}`),m("tx commited. open your console page to check txReceipt.","success"),await d((t=>[...t,`call "${e.name}", tx ${c.transactionHash} commited.`]))};return Object(j.jsxs)("div",{style:fe.method_item,children:[Object(j.jsxs)("span",{style:fe.method_name,children:[" ",t+1,". ",e.name," "]}),Object(j.jsxs)("li",{style:fe.method_box,children:[e.payable&&Object(j.jsx)("p",{children:Object(j.jsx)("input",{style:fe.param_input,onChange:e=>{console.log(e.target.value),r=Object(ge.toWei)(e.target.value)},name:"value_"+t,type:"text",placeholder:"value: ETH"})}),Object(j.jsxs)("p",{children:[" ",null===(n=e.inputs)||void 0===n?void 0:n.map(((e,t)=>(a.push(""),Object(j.jsx)("li",{children:Object(j.jsx)("p",{children:Object(j.jsx)("input",{style:fe.param_input,onChange:s,name:t+"",type:"text",placeholder:e.type})})},"intputs_"+t))))]}),Object(j.jsxs)("button",{style:fe.submit_btn,onClick:()=>{(async(e,t)=>{if("function"!==e.type)throw new Error("expect a function");if("view"===e.stateMutability)try{await c(e,t)}catch(n){console.log(n),m(JSON.stringify(n.message,null,2))}if("view"!==e.stateMutability)try{await l(e,t)}catch(n){m(JSON.stringify(n.message,null,2))}})(e,a)},children:[" ","view"===e.stateMutability?"call":"send tx"," "]})]},t)," "]})})))(r)]})}const _e={...b,header:{minHeight:"300px",margin:"10px"},address:{color:"#a0eec0"},balance:{color:"whitesmoke",fontSize:"20px"},button:{fontSize:"25px",width:"100%",maxWidth:"700px",margin:"10px",padding:"0.7rem 1.2rem",color:"black"},contract_container:{width:"100%",maxWidth:"700px",margin:"30px auto",textAlign:"left",fontSize:"15px",border:"1px solid gray",color:"gray"},contract_li:{listStyleType:"none"},descrip_sudt:{width:"600px",fontSize:"13px",margin:"30px auto",textAlign:"left"},placeholder_for_experimental:{width:"700px",margin:"0 auto",marginTop:"50px"}};function we(e){const t=Object(a.useRef)(null),[n,o]=Object(a.useState)(!1),[r,s]=Object(a.useState)([]);Object(a.useState)();const{selectedAddress:i,rollupTypeHash:c,ethAccountLockConfig:l}=e,d=async e=>{if(!e)return m("upload contract binary file or contract artifacts first!");if(!i)return m("window.ethereum.selectedAddress not found.");const t=(()=>{const e=u.web3_server_url.devnet;return new je.a(je.a.givenProvider||e)})();try{const n={gasPrice:"0x0000",gas:"0x9184e72a000",from:window.ethereum.selectedAddress,value:"0x00",data:e};console.log(n);const a=await t.eth.sendTransaction(n);console.log(`txReceipt: ${JSON.stringify(a,null,2)}`);const o=a.contractAddress;if(console.log(`contract address: ${o}`),!o)return m(`could not find your contract address in txReceipt: ${a}`);m(`your contract address: ${o}`,"success"),s((e=>[...e,o]))}catch(n){return console.log(n),m(`could not finished signing process. \n\n ${JSON.stringify(n.message)}`)}};return Object(j.jsxs)("div",{children:[Object(j.jsx)(y.a,{container:!0,spacing:3,children:Object(j.jsxs)(y.a,{item:!0,xs:12,children:[Object(j.jsx)(S,{text:"Deploy Contract",isLoading:n,onClick:async()=>{if(!t)return m("input ref not found.");t.current.click()},custom_style:_e.button}),Object(j.jsx)("input",{type:"file",ref:t,onChange:async e=>{const t=e.target.files[0];var n;try{n=await(async e=>{const t=e.target.files[0],n=await p.b.readDataFromFile(t);if(console.log(n),"ok"!==n.status)throw m("can not read contract abi from file."),new Error("can not read contract abi from file.");const a=JSON.parse(n.data);if("object"===typeof a&&a.bytecode)return a.bytecode;throw m("not a valid artifacts file!"),new Error("not a valid artifacts file!")})(e)}catch(a){const e=await(e=>new Promise(((t,n)=>{const a=new FileReader;a.onload=e=>{const n=`0x${e.target.result}`;t({status:"ok",data:n})},a.onerror=e=>{t({status:"failed",error:e})},a.onabort=()=>{t({status:"failed",error:"user abort."})},a.readAsBinaryString(e)})))(t);if("ok"!==e.status)return m("can not read contract code from file.");n=e.data,console.log("reading contract code hex:"),console.log(n)}o(!0),await d(n),o(!1)},hidden:!0}),Object(j.jsx)(N.a,{style:{fontSize:"12px",color:"gray"},children:"Select Json File Of Artifacts Or Abi"})]})}),Object(j.jsx)(y.a,{container:!0,spacing:3,children:Object(j.jsxs)(y.a,{item:!0,xs:12,style:_e.contract_container,children:["Contract Address:",Object(j.jsx)(te.a,{language:"javascript",style:ee.a,children:r.length>0?r.join("\n"):"nothing."})]})}),Object(j.jsx)(he.a,{}),Object(j.jsx)(y.a,{container:!0,spacing:3,children:Object(j.jsxs)(y.a,{item:!0,xs:12,children:[Object(j.jsx)(N.a,{variant:"h5",children:"Contract Debugger"}),Object(j.jsx)(ye,{godwoken_config:{rollup_type_hash:c,eth_account_lock_code_hash:null===l||void 0===l?void 0:l.code_hash,eth_account_lock_hash_type:null===l||void 0===l?void 0:l.hash_type}})]})})]})}const Oe={...b,header:{minHeight:"300px"},address:{color:"#a0eec0"},balance:{color:"whitesmoke",fontSize:"20px"},button:{fontSize:"25px",width:"100%",maxWidth:"700px",margin:"10px",padding:"0.7rem 1.2rem",color:"black"},contract_container:{width:"100%",maxWidth:"700px",margin:"30px auto",textAlign:"left",fontSize:"15px",border:"1px solid gray",color:"gray"},contract_li:{listStyleType:"none"},descrip_sudt:{width:"600px",fontSize:"13px",margin:"30px auto",textAlign:"left"},placeholder_for_experimental:{width:"700px",margin:"0 auto",marginTop:"50px"}};var ve=function(){const[e,t]=Object(a.useState)(),[n,o]=Object(a.useState)(),[r,s]=Object(a.useState)(),[i,c]=Object(a.useState)(0);Object(a.useEffect)((()=>{l(),d()}),[]);const l=async()=>{const e=new h;try{const t=await e.getRollupTypeHash();if("ok"!==t.status)return m(`failed to get rollup type hash. ${JSON.stringify(t.error)}`);o(t.data)}catch(t){console.log("get rollup type hash error"),console.log(t),m(JSON.stringify(t))}},d=async()=>{const e=new h;try{const t=await e.getEthAccountLockConfig();if("ok"!==t.status)return m(`failed to get eth_account_lock config. ${JSON.stringify(t.error)}`);s(t.data)}catch(t){console.log("get eth account lock error"),console.log(t),m(JSON.stringify(t))}},u=[Object(j.jsx)(ae,{}),Object(j.jsx)(pe,{addressVec:[e],updateBalanceTrigger:()=>{c(i+1)}}),Object(j.jsx)(we,{selectedAddress:e,rollupTypeHash:n,ethAccountLockConfig:r})];return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)(f,{}),Object(j.jsxs)(y.a,{container:!0,children:[Object(j.jsx)(y.a,{item:!0,xs:12,style:Oe.header,spacing:3,children:Object(j.jsx)(M,{onUpdateWalletAddress:e=>{e&&t(e)},updateBalanceTrigger:i})}),Object(j.jsx)(y.a,{item:!0,xs:12,spacing:3,children:Object(j.jsx)(G,{names:["chain Info","Accounts","Contract"],tabs:u})})]})]})})})};function ke(e){const{title:t,jsonInfo:n}=e,[o,r]=Object(a.useState)();return console.log(typeof n),Object(a.useEffect)((()=>{r("string"===typeof n?n:JSON.stringify(n,null,2))}),[n]),Object(j.jsxs)("div",{children:[t||"",Object(j.jsx)(te.a,{language:"javascript",style:ee.a,children:o||""})]})}function Ce(){const[e,t]=Object(a.useState)(),[n,o]=Object(a.useState)();Object(a.useEffect)((()=>{r()}),[]);const r=async()=>{const e=new h,n=await e.getGodwokenScriptDeployResultFile(),a=await e.getGodwokenConfigFile();await t(n),await o(a)};return Object(j.jsxs)("div",{children:[Object(j.jsx)(ke,{title:"Godwoken Scripts Deploy Result",jsonInfo:e}),Object(j.jsx)(ke,{title:"Godwoken Rollup Config",jsonInfo:n})]})}function Se(){return Object(j.jsx)(i.a,{children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(c.a,{path:"/godwoken_info",children:Object(j.jsx)(Ce,{})}),Object(j.jsx)(c.a,{path:"/",children:Object(j.jsx)(ve,{})})]})})}var Ae=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,850)).then((({getCLS:t,getFID:n,getFCP:a,getLCP:o,getTTFB:r})=>{t(e),n(e),a(e),o(e),r(e)}))};s.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(Se,{})}),document.getElementById("root")),Ae()}},[[784,1,2]]]);
//# sourceMappingURL=main.6362b56d.chunk.js.map